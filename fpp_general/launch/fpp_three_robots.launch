<?xml version="1.0"?>
<launch>
    <arg name="moveit_rviz" default="false"/> <!--False so moveit rviz wont open as I dont need that here-->
    <arg name="open_navigation_rviz" default="false"/> <!--False so the default RVIZ wont open and my special rviz config will be loaded-->
    <arg name="gazebo_gui" default="true"/> <!--Start without Gazebo GUI, RVIZ is enough-->

    <!--Variables for the robot0-->
    <arg name="robot0_name" value="robot0"/>
    <arg name="robot0_namespace" value="$(arg robot0_name)_ns"/>
    <arg name="robot0_tf" value="$(arg robot0_name)_tf/"/>
    <arg name="robot0_x_pos" default="0.0"/>
    <arg name="robot0_y_pos" default="0.0"/>
    <arg name="robot0_yaw_rot" default="0.0"/>

    <!--Variables for the robot1-->
    <arg name="robot1_name" value="robot1"/>
    <arg name="robot1_namespace" value="$(arg robot1_name)_ns"/>
    <arg name="robot1_tf" value="$(arg robot1_name)_tf/"/> 
    <arg name="robot1_x_pos" default="-1.0"/>
    <arg name="robot1_y_pos" default="1.0"/>
    <arg name="robot1_yaw_rot" default="0.0"/>

    <!--Variables for the robot2-->
    <arg name="robot2_name" value="robot2"/>
    <arg name="robot2_namespace" value="$(arg robot2_name)_ns"/>
    <arg name="robot2_tf" value="$(arg robot2_name)_tf/"/> 
    <arg name="robot2_x_pos" default="-1.0"/>
    <arg name="robot2_y_pos" default="-1.0"/>
    <arg name="robot2_yaw_rot" default="0.0"/>

    <!--Start complete system-->
    <include file="$(find mur205_launch)/launch/system_sim.launch">
        <arg name="open_navigation_rviz" value="$(arg open_navigation_rviz)"/>
        <arg name="gui" value="$(arg gazebo_gui)"/>
    </include>
    
    
    <!--Spawn all robots-->
    <include file="$(find mur205_launch)/launch/spawn_mur205.launch">
        <arg name="robot_name" value="$(arg robot0_name)"/>
        <arg name="robot_namespace" value="$(arg robot0_namespace)"/>
        <arg name="tf_prefix" value="$(arg robot0_tf)"/>
        <arg name="moveit_rviz" value="$(arg moveit_rviz)" />
        <arg name="x_pos" value="$(arg robot0_x_pos)"/>
        <arg name="y_pos" value="$(arg robot0_y_pos)"/>
        <arg name="yaw_rot" value="$(arg robot0_yaw_rot)"/>
    </include>

    <include file="$(find mur205_launch)/launch/spawn_mur205.launch">
        <arg name="robot_name" value="$(arg robot1_name)"/>
        <arg name="robot_namespace" value="$(arg robot1_namespace)"/>
        <arg name="tf_prefix" value="$(arg robot1_tf)"/>
        <arg name="moveit_rviz" value="$(arg moveit_rviz)" />
        <arg name="x_pos" value="$(arg robot1_x_pos)"/>
        <arg name="y_pos" value="$(arg robot1_y_pos)"/>
        <arg name="yaw_rot" value="$(arg robot1_yaw_rot)"/>
    </include>

    <include file="$(find mur205_launch)/launch/spawn_mur205.launch">
        <arg name="robot_name" value="$(arg robot2_name)"/>
        <arg name="robot_namespace" value="$(arg robot2_namespace)"/>
        <arg name="tf_prefix" value="$(arg robot2_tf)"/>
        <arg name="moveit_rviz" value="$(arg moveit_rviz)" />
        <arg name="x_pos" value="$(arg robot2_x_pos)"/>
        <arg name="y_pos" value="$(arg robot2_y_pos)"/>
        <arg name="yaw_rot" value="$(arg robot2_yaw_rot)"/>
    </include>

    <!--Launch rviz-->
    <!-- <node type="rviz" name="rviz2" pkg="rviz" args="-d $(find fpp_general)/rviz/relaxed_a_star.rviz"/> -->
    <include file="$(find fpp_general)/launch/helper/rviz_relaxed_a_star.launch"/>
</launch>